# 更新日志

## [v0.3] - 2024-12-24

### 新增功能
- 🎵 **迷你模式**
  - 紧凑的悬浮播放器窗口（350x120 像素）
  - 无边框、圆角、半透明设计
  - 窗口置顶，始终显示在最前面
  - 可拖动到屏幕任意位置
  - 显示专辑封面、歌名、艺术家、播放时间
  - 完整的播放控制（上一首、播放/暂停、下一首）
  - 音量调节滑块
  - 一键恢复正常窗口
  - 与主窗口完全同步状态

### Bug 修复
- 🐛 **修复播放完成后不自动播放下一首**
  - 增强播放完成检测逻辑
  - 添加调试日志输出
  - 确保 `track_finished` 信号正确触发

- 🐛 **修复迷你模式切换问题**
  - 修复切换回正常模式后无法再次进入迷你模式的问题
  - 完善窗口显示和激活逻辑
  - 添加状态调试信息

- 🐛 **修复随机播放模式**
  - 修复随机模式实际按顺序播放的问题
  - 改进随机索引同步逻辑
  - 支持从任意曲目开始随机播放

### 使用方法
- 主窗口菜单 ☰ → 🎵 迷你模式
- 迷你窗口 □ 按钮恢复正常窗口
- 迷你窗口 × 按钮关闭迷你模式

### 技术改进
- 添加 `MiniWindow` 类实现迷你播放器
- 主应用添加模式切换逻辑
- 状态同步机制（播放状态、音量、歌曲信息）
- 鼠标拖动窗口功能
- 完善播放引擎的状态管理
- 优化播放列表管理器的随机算法

---

## [v0.2] - 2024-12-XX

### 新增功能
- 🎯 **可拖动进度条** - 快速跳转到歌曲任意位置
- 🔀 **多种播放模式**
  - 顺序播放 ⏩
  - 列表循环 🔁
  - 随机播放 🔀
  - 单曲循环 🔂
- 🔍 **搜索过滤** - 实时搜索歌曲、艺术家、专辑
- 🎨 **元数据显示**
  - 歌曲标题、艺术家、专辑
  - 专辑封面图片
  - 播放时长
- 💾 **播放列表管理**
  - 保存播放列表为 JSON 文件
  - 加载已保存的播放列表
  - 播放列表统计信息
- ⌨️ **键盘快捷键**
  - `空格`：播放/暂停
  - `→`：下一首
  - `←`：上一首
  - `↑`：增加音量 5%
  - `↓`：减少音量 5%
- 🔔 **系统托盘**
  - 最小化到系统托盘
  - 托盘菜单快速控制
  - 后台播放支持
- 🗑️ **右键删除** - 播放列表右键菜单删除歌曲
- 📊 **统计信息** - 显示歌曲数量和总时长

### 架构改进
- 🏗️ **MVC 架构**
  - Models: 数据模型和业务逻辑
  - Views: UI 组件
  - Controllers: 控制器协调
- 📁 **模块化设计**
  - 清晰的目录结构
  - 组件解耦
  - 易于维护和扩展

### 技术栈
- 从 PyQt5 迁移到 PySide6
- 使用 soundfile + sounddevice 替代 pygame
- 使用 mutagen 读取音频元数据

---

## [v0.1] - 初始版本

### 基础功能
- 🎵 播放 MP3、WAV、OGG、FLAC 等音频格式
- 📁 添加单个文件或整个文件夹
- ⏯️ 基本播放控制（播放/暂停/停止/上一首/下一首）
- 🔊 音量调节
- 📝 播放列表显示
- 💾 自动保存设置
- 🎨 深色主题界面

### 技术实现
- Python 3.7+
- PyQt5 GUI 框架
- Pygame 音频播放
- 基础的配置管理

---

## 未来计划

### v0.4 计划
- 🎼 歌词显示（LRC 格式）
- 📊 播放统计和历史记录
- 🎚️ 音频均衡器
- 🎨 主题切换（浅色/深色）
- 📱 播放队列功能

### v0.5 计划
- 🎵 频谱可视化
- 📀 专辑视图
- 🔄 音频格式转换
- 🌐 在线歌词下载
- ☁️ 云同步支持

### 长期计划
- 🔌 插件系统
- 🌍 国际化（多语言）
- 🤖 智能推荐
- 🎧 音效增强
- 📱 移动端同步

---

**感谢使用音乐播放器！**
